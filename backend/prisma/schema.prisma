// Updated User model in your schema.prisma file
// MAR ABU PROJECTS SERVICES LLC - Updated User Schema

model User {
  id                String        @id @default(cuid())
  email             String        @unique
  firstName         String
  lastName          String  
  password          String
  phone             String?
  avatar            String?       // NEW: Avatar URL field
  role              UserRole      @default(CUSTOMER)
  status            UserStatus    @default(PENDING_VERIFICATION)
  emailVerified     DateTime?
  resetToken        String?       // NEW: Password reset token
  resetTokenExpiry  DateTime?     // NEW: Reset token expiration
  lastLoginAt       DateTime?     // NEW: Last login timestamp
  createdAt         DateTime      @default(now())
  updatedAt         DateTime?     @updatedAt // NEW: Updated timestamp

  // Relations
  bookings          Booking[]     @relation("CustomerBookings")
  hostedProperties  Property[]    @relation("PropertyHost")
  payments          Payment[]
  reviews           Review[]
  notifications     Notification[]
  auditLogs         AuditLog[]

  @@index([email])
  @@index([resetToken])    // NEW: Index for password reset lookups
  @@map("users")
}

enum UserRole {
  CUSTOMER
  PROPERTY_HOST
  ADMIN
  SUPER_ADMIN
}

enum UserStatus {
  PENDING_VERIFICATION
  ACTIVE
  SUSPENDED
  DEACTIVATED
}